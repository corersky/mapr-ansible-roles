
--- 
- hosts: all
  sudo: yes
  roles:
    - common
    - control_node

  tasks:
    - name: configure single-node cluster
      command: /opt/mapr/server/configure.sh -C {{ansible_hostname}} -Z {{ansible_hostname}}  -N vagrant -a -d localhost:3306 -du root -dp "" -a 

    - name: add the disks
      command: /opt/mapr/server/disksetup /tmp/disks.txt

    - name: start the cluster
      service: name={{item}} state=started
      with_items:
        - mapr-zookeeper
        - mapr-warden

